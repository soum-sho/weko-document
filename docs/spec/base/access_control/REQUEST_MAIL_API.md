# リクエストメール

リクエストメールに関するAPIのアクセスコントロールについて記述します。

## 目次

- [GET /api/\<version>/captcha/image](#get-apiversioncaptchaimage)
- [POST /api/\<version>/captcha/validate](#post-apiversioncaptchavalidate)
- [POST /api/\<version>/records/\<pid_value>/request-mail](#post-apiversionrecordspid_valuerequest-mail)



## GET /api/\<version>/captcha/image

表内のいずれかの○に合致すれば、CAPTCHA画像を生成し、取得します。

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                 | ○                   | ○                      | ○            | ○            | ○                        |




## POST /api/\<version>/captcha/validate

CAPTCHAの結果検証APIを使用するためには2つの条件を満たす必要があります。

一つでも×なら不可、すべて○であればCAPTCHAの計算結果を検証することが出来ます。

条件1 APIへのアクセス

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                 | ○                   | ○                      | ○            | ○            | ○                        |

条件2 トークン取得可否

| ロール                                  | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| <br>calculation_result<br>が正しい | ○                  | ○                    | ○                      | ○            | ○            | ○                       |
| <br>calculation_result<br>が誤り                                 | ×                  | ×                    | ×                      | ×            | ×            | ×                        |



## POST /api/\<version>/records/\<pid_value>/request-mail

リクエストメール送信用WEB APIを使用するためには2つの条件を満たす必要があります。

一つでも×なら不可、すべて○であればリクエストメールの送信が有効の場合、リクエストメールを送信することが出来ます。

条件1 APIへのアクセス

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                 | ○                   | ○                      | ○            | ○            | ○                        |

条件2 メール送信可否

| ロール                                  | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| <br>authorization_token<br>が正しい | ○                  | ○                    | ○                      | ○            | ○            | ○                       |
| <br>authorization_token<br>が誤り                                 | ×                  | ×                    | ×                      | ×            | ×            | ×                        |



- > 更新履歴

<table>
<thead>
<tr class="header">
<th>日付</th>
<th>GitHubコミットID</th>
<th>更新内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>2025/8/7</p>
</blockquote></td>
<td></td>
<td>初版作成</td>
</tr>
</tbody>
</table>