# ワークフロー管理

ワークフロー管理のアクセスコントロールについて記述します。

## 目次

- [フロー](#フロー)
  - [フロー一覧](#フロー一覧)
  - [フロー作成](#フロー作成)
  - [フロー編集](#フロー編集)
- [ワークフロー](#ワークフロー)
  - [ワークフロー一覧](#ワークフロー一覧)
  - [ワークフロー作成](#ワークフロー作成)
  - [ワークフロー編集](#ワークフロー編集)
- [ワークスペース設定](#ワークスペース設定)

## フロー

### フロー一覧

エンドポイント：/admin/flowsetting/

○に合致すれば、フロー一覧画面を閲覧出来ます。

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                  | ○                    | ○                      | ×            | ×            | ×                        |

#### フロー表示

いずれかの○に合致すれば、フロー一覧にフローが表示されます。

| 条件/ロール                                                                        | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| フローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ○                    | ○                      | ×            | ×            | ×                        |
| 上記以外                                                                           | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

### フロー作成

エンドポイント：/admin/flowsetting/0

○に合致すればフロー作成を行うことが出来ます。

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                  | ○                    | ○                      | ×            | ×            | ×                        |

### フロー編集

エンドポイント：/admin/flowsetting/<フローのuuid>

#### 編集

フロー編集機能を利用するには、2つの条件を満たす必要があります。

以下2つの条件の一方でも×なら利用不可、どちらも○であれば機能を利用出来ます。

| 条件1/ロール                                                                       | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| フローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ○                    | ○                      | ×            | ×            | ×                        |
| 上記以外                                                                           | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

| 条件2/ロール                         | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ------------------------------------ | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| フローが<br>「利用申請フラグ：有効」 | ○                  | ×                    | ×                      | ×            | ×            | ×                        |
| 上記以外                             | ○                  | ○                    | ○                      | ×            | ×            | ×                        |

#### 削除

フロー削除機能を利用するには、2つの条件を満たす必要があります。

以下2つの条件の一方でも×なら利用不可、どちらも○であれば機能を利用出来ます。

| 条件1/ロール                                                                       | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| フローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ○                    | ○                      | ×            | ×            | ×                        |
| 上記以外                                                                           | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

| 条件2/ロール                                 | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| フローが<br>ワークフローに<br>登録されている | ×                  | ×                    | ×                      | ×            | ×            | ×                        |
| 上記以外                                     | ○                  | ○                    | ○                      | ×            | ×            | ×                        |

## ワークフロー

### ワークフロー一覧

エンドポイント：/admin/workflowsetting/

○に合致すれば、ワークフロー一覧画面を閲覧出来ます。

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                  | ○                    | ○                      | ×            | ×            | ×                        |

#### ワークフロー表示

いずれかの○に合致すれば、ワークフロー一覧にワークフローが表示されます。

| 条件/ロール                                                                              | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| ワークフローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ○                    | ○                      | ×            | ×            | ×                        |
| 上記以外                                                                                 | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

### ワークフロー作成

エンドポイント：/admin/workflowsetting/0

○に合致すればワークフロー作成を行うことが出来ます。

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                  | ○                    | ○                      | ×            | ×            | ×                        |

### ワークフロー編集

エンドポイント：/admin/workflowsetting/<フローのuuid>

#### 編集

いずれかの○に合致すれば、ワークフロー編集機能を利用出来ます。

| 条件/ロール                                                                              | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| ワークフローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ○                    | ○                      | ×            | ×            | ×                        |
| 上記以外                                                                                 | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

#### 削除

ワークフロー削除機能を利用するには、2つの条件を満たす必要があります。

以下2つの条件の一方でも×なら利用不可、どちらも○であれば機能を利用出来ます。

| 条件1/ロール                                                                             | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| ワークフローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ○                    | ○                      | ×            | ×            | ×                        |
| 上記以外                                                                                 | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

| 条件2/ロール                                 | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| ワークフローが<br>アクティビティ<br>で使用中 | ×                  | ×                    | ×                      | ×            | ×            | ×                        |
| 上記以外                                     | ○                  | ○                    | ○                      | ×            | ×            | ×                        |

#### 利用申請フラグ

いずれかの○に合致すれば、ワークフロー作成、および編集時に利用申請フラグを有効にする選択肢が表示されます。

| 条件/ロール                                                                              | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| ワークフローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ×                    | ×                      | ×            | ×            | ×                        |
| 上記以外                                                                                 | ○                  | ×                    | ×                      | ×            | ×            | ×                        |

#### フロー表示

いずれかの○に合致すれば、ワークフロー作成、および編集時のフロー選択で選択肢にフローが表示されます。

| 条件/ロール                                                                              | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ---------------------------------------------------------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| ワークフローの<br>「Repository」に<br>自身の管理する<br>コミュニティが<br>登録されている | ○                  | ○                    | ○                      | ×            | ×            | ×                        |
| 上記以外                                                                                 | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

## ワークスペース設定

エンドポイント：/admin/workspaceworkflowsetting/

○に合致すれば、ワークスペース設定画面を閲覧することが出来ます。

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

## 更新履歴

| 日付       | GitHubコミットID                           | 更新内容                                                 |
| ---------- | ------------------------------------------ | -------------------------------------------------------- |
| 2025/08/29 |                                            | 初版作成                                                 |
