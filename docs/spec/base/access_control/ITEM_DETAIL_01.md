# アイテム

アイテム詳細画面の機能のアクセスコントロールについて記述します。

エンドポイント: /records/<アイテムID>

## 用語定義

本書では以下の用語で統一します。

| 用語                                 | 説明                                                       |
| ------------------------------------ | ---------------------------------------------------------- |
| オープンアクセス                     | 公開設定が「公開」のアイテム                               |
| コミュニティメンバー作成アイテム     | 同一コミュニティに所属するメンバーが作成した非公開アイテム |
| 登録ユーザー（自分）作成アイテム     | ロール「登録ユーザー」が自分で作成した非公開アイテム       |
| 登録ユーザー（自分以外）作成アイテム | 自分以外のロール「登録ユーザー」が作成した非公開アイテム   |
| 代理投稿者作成アイテム               | SWORD APIで代理投稿者が作成した非公開アイテム              |

## 目次

- [アイテム閲覧](#アイテム閲覧)
- [アイテム編集](#アイテム編集)
- [アイテム削除](#アイテム削除)
- [バージョン削除](#バージョン削除)
- [公開ステータス変更](#公開ステータス変更)
- [リクエストメール](#リクエストメール)
- [利用申請](#利用申請)
- [エクスポート](#エクスポート)
  - [OAI-PMH](#oai-pmh)
  - [Other Formats](#other-formats)
- [コミュニティ](#コミュニティ)

## アイテム閲覧

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ○            | ○                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

## アイテム編集

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ○            | ○                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

## アイテム削除

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ○            | ○                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

※ `DOI`が付与されているアイテムは削除出来ません。<br>
※ `DOI`が付与されているアイテムに対して、アイテムが直接紐づいているインデックスとその上位のインデックスのうち1つでも`非表示設定`がある場合も削除出来ません。

## バージョン削除

アイテムに`バージョン`が複数あり、かつユーザーに削除権限がある場合に本機能の利用が可能です。

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ×            | ×                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

## 公開ステータス変更

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ×            | ×                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

※ `DOI`が付与されているアイテムはステータスを非公開に変更することは出来ません。

## リクエストメール

アイテム登録時、および編集時にリクエストメールの送信先が設定されていれば、本機能の利用が可能です。

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ○            | ○                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

## 利用申請

パスワードチェック機能が`ON`で、ユーザーがログインしていない場合のみ[申請]ボタンが表示されます。

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ×                  | ×                    | 　 ×                      | ×                              | ×            | ×            | ○                      |
| コミュニティメンバー作成アイテム         | ×                  | ×                    | 　 ×                      | ×                              | ×            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ×                  | ×                    | 　 ×                      | ×                              | ×            | ×            | ○                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ×                  | ×                    | 　 ×                      | ×                              | ×            | ×            | ○                      |
| 代理投稿者作成アイテム                   | ×                  | ×                    | 　 ×                      | ×                              | ×            | ×            | ○                      |

## エクスポート

### OAI-PMH

エンドポイント: `/oai`

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ○            | ○                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

### Other Formats

エンドポイント: `/records/<アイテムID>/export/<フォーマット>`

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ○            | ○                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

## コミュニティ

アイテムが所属するコミュニティがある場合、コミュニティの「アイコン」と「タイトル」が表示されます。<br>
所属するコミュニティがない場合は、コミュニティエリアは空の状態で表示されます。

| アイテム/ロール                          | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー<br>（代理投稿者） | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------------------------ | ------------ | ------------ | ---------------------- |
| オープンアクセス                         | ○                  | ○                    | 　 ○                      | ○                              | ○            | ○            | ○                      |
| コミュニティメンバー作成アイテム         | ○                  | ○                    | 　 ○                      | ○                              | ○            | -            | -                      |
| 登録ユーザー（自分）<br>作成アイテム     | ○                  | ○                    | 　○                       | ○                              | ○            | ×            | ×                      |
| 登録ユーザー（自分以外）<br>作成アイテム | ○                  | ○                    | 　○                       | ×                              | ×            | ×            | ×                      |
| 代理投稿者作成アイテム                   | ○                  | ○                    | 　○                       | ○                              | ×            | ×            | ×                      |

- > 更新履歴

<table>
<thead>
<tr class="header">
<th>日付</th>
<th>GitHubコミットID</th>
<th>更新内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>2025/7/16</p>
</blockquote></td>
<td></td>
<td>初版作成</td>
</tr>
</tbody>
</table>
