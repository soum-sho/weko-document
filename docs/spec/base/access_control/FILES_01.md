# ファイル

アイテムの添付ファイルのアクセスコントロールについて記述します。

エンドポイント: /records/<アイテムID>/file_details

## 目次

- [ファイルダウンロード](#ファイルダウンロード)
- [ファイル情報](#ファイル情報)
- [ファイルプレビュー](#ファイルプレビュー)
- [ファイル置き換え](#ファイル置き換え)
- [公開バケットへのコピー](#公開バケットへのコピー)
- [シークレットURL](#シークレットurl)
  - [シークレットURL設定編集機能](#シークレットurl設定編集機能)
  - [作成済みシークレットURL編集機能](#作成済みシークレットurl編集機能)
  - [利用申請](#利用申請)

## ファイルダウンロード

表内のいずれかの条件の○に合致すればダウンロードが可能です。

#### ファイル公開設定：オープンアクセス

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |

#### ファイル公開設定：オープンアクセス日を指定する（指定日前）

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○ 　                      | × ※1         | × ※1         | × ※2                   |

※1 ダウンロードボタンを押下するとエラー画面へ遷移します。<br>
※2 ダウンロードボタンを押下するとログイン画面へ遷移します。

#### ファイル公開設定：ログインユーザーのみ

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ○            | ○            | × ※1                   |

※1 ダウンロードボタンを押下するとログイン画面へ遷移します。

#### ファイル公開設定：公開しない

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ×            | ×            | ×                      |

## ファイル情報

表内のいずれかの条件の○に合致すれば情報閲覧が可能です。

#### ファイル公開設定：公開しない「以外」

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |

#### ファイル公開設定：公開しない

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ×            | ×            | ×                      |

## ファイルプレビュー

「ファイル情報 > 表示形式」が「プレビュー」の場合、ファイルプレビューを行うことが出来ます。

表内のいずれかの条件の○に合致すればプレビュー閲覧が可能です。

#### ファイル公開設定：オープンアクセス

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |

#### ファイル公開設定：オープンアクセス日を指定する（指定日前）

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | × ※1         | × ※1         | × ※2                   |

※1 プレビューボタンを押下するとエラーアラートが表示されます。<br>
※2 プレビューボタンを押下するとログイン画面へ遷移します。

#### ファイル公開設定：ログインユーザーのみ

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ○            | ○            | × ※1                   |

※1 プレビューボタンを押下するとログイン画面へ遷移します。

#### ファイル公開設定：公開しない

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ○　                       | ×            | ×            | ×                      |

## ファイル置き換え

表内のいずれかの条件の○に合致すればファイルの置き換えが可能です。

ファイルの公開設定によるアクセスコントロールの差異はありません。

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

## 公開バケットへのコピー

表内のいずれかの条件の○に合致すれば公開バケットへのコピーが可能です。

ファイルの公開設定によるアクセスコントロールの差異はありません。

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

## シークレットURL

表内のいずれかの条件の○に合致すればシークレットURLの操作が可能です。

### シークレットURL設定編集機能

ファイルの公開設定によるアクセスコントロールの差異はありません。

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

### 作成済みシークレットURL編集機能

ファイルの公開設定によるアクセスコントロールの差異はありません。

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 代理投稿者：自分 | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 上記以外         | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

### 利用申請

対象のファイルのアクセスロールが「制限公開」であり、ユーザーにダウンロード権限がない場合に[申請]ボタンが表示されます。

画面を表示しているユーザー（ゲストを含む）のロールがアイテムに設定されている利用申請とロールのペアに含まれていれば申請権限が与えられます。

上記の申請権限があり、また表内のいずれかの条件の○に合致すれば利用申請を行うことが可能です。

#### ファイル公開設定：オープンアクセス

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 代理投稿者：自分 | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 上記以外         | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |

#### ファイル公開設定：オープンアクセス日を指定する（指定日前）

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 代理投稿者：自分 | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 上記以外         | ×                  | ×                    | ×　                       | ○            | ○            | ○                      |

#### ファイル公開設定：ログインユーザーのみ

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 代理投稿者：自分 | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 上記以外         | ×                  | ×                    | ×　                       | ×            | ○            | ○                      |

#### ファイル公開設定：公開しない

| 条件/ロール      | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| 作成者：自分     | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 代理投稿者：自分 | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |
| 上記以外         | ×                  | ×                    | ×　                       | ×            | ×            | ×                      |

- > 更新履歴

<table>
<thead>
<tr class="header">
<th>日付</th>
<th>GitHubコミットID</th>
<th>更新内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>2025/8/6</p>
</blockquote></td>
<td></td>
<td>初版作成</td>
</tr>
</tbody>
</table>
