# ファイル

アイテムの添付ファイルのアクセスコントロールについて記述します。

エンドポイント: /records/<アイテムID>/file_details

## 用語定義

本書では以下の用語で統一します。

| 用語                                                     | 説明                                                                                 |
| -------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| オープンアクセス                                         | 公開設定が「公開」のアイテム                                                         |
| 登録ユーザー（自分）作成アイテム                         | ロール「登録ユーザー」が自分で作成した公開設定が「公開」アイテム                     |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | 同一コミュニティに所属する自分以外のロール「登録ユーザー」が作成した「公開」アイテム |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | 別コミュニティに所属する自分以外のロール「登録ユーザー」が作成した「公開」アイテム   |

## 目次

- [ファイルダウンロード](#ファイルダウンロード)
- [ファイル情報](#ファイル情報)
- [ファイルプレビュー](#ファイルプレビュー)

## ファイルダウンロード

#### ファイル公開設定：オープンアクセス

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |

#### ファイル公開設定：オープンアクセス日を指定する

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

#### ファイル公開設定：ログインユーザーのみ

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |

#### ファイル公開設定：公開しない

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

## ファイル情報

#### ファイル公開設定： 公開しない【以外】

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |

#### ファイル公開設定：公開しない

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

## ファイルプレビュー

`ファイル情報 > 表示形式`が`プレビュー`の場合、ファイルプレビューを行うことが出来ます。

#### ファイル公開設定：オープンアクセス

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |

#### ファイル公開設定：オープンアクセス日を指定する

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

#### ファイル公開設定：ログインユーザーのみ

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ○　                       | ○            | ○            | ×                      |

#### ファイル公開設定：公開しない

| ロール                                                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| オープンアクセス                                         | ○                  | ○                    | ○　                       | ○            | ○            | ○                      |
| 登録ユーザー（自分）作成アイテム                         | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 同一コミュニティ<br>登録ユーザー（自分以外）作成アイテム | ○                  | ○                    | ○　                       | ○            | ×            | ×                      |
| 別コミュニティ<br>登録ユーザー（自分以外）作成アイテム   | ○                  | ○                    | ×　                       | ×            | ×            | ×                      |

- > 更新履歴

<table>
<thead>
<tr class="header">
<th>日付</th>
<th>GitHubコミットID</th>
<th>更新内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>2025/7/</p>
</blockquote></td>
<td></td>
<td>初版作成</td>
</tr>
</tbody>
</table>
