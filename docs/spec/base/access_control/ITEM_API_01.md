# アイテム

アイテムに関するAPIのアクセスコントロールについて記述します。

## 目次

- [GET /api/\<version>/records](#get-apiversionrecords)
- [GET /api/records/](#get-apirecords)
- [GET /api/\<version>/records/\<pid_value>](#get-apiversionrecordspid_value)
- [GET /api/\<version>/records/\<pid_value>/stats](#get-apiversionrecordspid_valuestats)
- [POST /api/\<version>/records/list](#post-apiversionrecordslist)
- [GET /api/index/](#get-apiindex)
- [PUT /api/records/](#put-apirecords)

## GET /api/\<version>/records

#### APIの使用

いずれかの○に合致すれば、アイテムを検索するAPIを使用することが出来ます。

| 条件/ロール                             | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| --------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| トークンのスコープに<br>item:readがある | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 上記以外                                | ×                  | ×                    | ×                      | ×            | ×            | ○                        |

#### アイテムが検索結果に含まれるか否か

アイテムが検索結果に含まれるかどうかは、検索画面で検索結果にアイテムが表示されるかどうかと同一条件です。<br>
[検索画面](ITEM_SEARCH_01.md#検索画面)を参照ください。

| 条件/ロール | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ----------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 条件と合致  | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 合致しない  | ー                 | ー                   | ×                      | ×            | ×            | ×                        |

## GET /api/records/

#### APIの使用

いずれかの○に合致すれば、アイテムを検索するAPIを使用することが出来ます。

| 条件/ロール                             | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| --------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| トークンのスコープに<br>item:readがある | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 上記以外                                | ×                  | ×                    | ×                      | ×            | ×            | ○                        |

#### アイテムが検索結果に含まれるか否か

アイテムが検索結果に含まれるかどうかは検索画面で検索結果にアイテムが表示されるかどうかと同一条件です。<br>
[検索画面](ITEM_SEARCH_01.md#検索画面)を参照ください。

| 条件/ロール | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ----------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 条件と合致  | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 合致しない  | ー                 | ー                   | ×                      | ×            | ×            | ×                        |

## GET /api/\<version>/records/\<pid_value>

#### APIの使用

いずれかの○に合致すれば、アイテム詳細情報を取得するAPIを使用することが出来ます。

| 条件/ロール                             | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| --------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| トークンのスコープに<br>item:readがある | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 上記以外                                | ×                  | ×                    | ×                      | ×            | ×            | ○                        |

#### アイテム詳細情報の取得可否

アイテムAPIにおける[アイテム閲覧権限](#アイテムAPIのアイテム閲覧権限)に応じて、いずれかの○に合致すればアイテム詳細情報が取得出来ます。

| 条件/ロール    | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 閲覧権限：あり | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 閲覧権限：なし | ×                  | ×                    | ×                      | ×            | ×            | ○                        |

## GET /api/\<version>/records/\<pid_value>/stats

#### APIの使用

いずれかの○に合致すれば、選択期間のアイテム閲覧数を取得するAPIを使用することが出来ます。

| 条件/ロール                             | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| --------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| トークンのスコープに<br>item:readがある | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 上記以外                                | ×                  | ×                    | ×                      | ×            | ×            | ○                        |

#### アイテム閲覧数取得可否

アイテムAPIにおける[アイテム閲覧権限](#アイテムAPIのアイテム閲覧権限)に応じて、いずれかの○に合致すればアイテム閲覧数を取得することが出来ます。

| 条件/ロール    | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 閲覧権限：あり | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 閲覧権限：なし | ×                  | ×                    | ×                      | ×            | ×            | ○                        |

## POST /api/\<version>/records/list

#### APIの使用

いずれかの○に合致すれば、検索結果の一覧を取得するAPIを使用することが出来ます。

| 条件/ロール                             | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| --------------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| トークンのスコープに<br>item:readがある | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 上記以外                                | ×                  | ×                    | ×                      | ×            | ×            | ○                        |

#### 検索結果一覧にアイテムが含まれるか否か

アイテムが検索結果に含まれるかどうかは検索画面で検索結果にアイテムが表示されるかどうかと同一条件です。<br>
[検索画面](ITEM_SEARCH_01.md#検索画面)を参照ください。

| 条件/ロール | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ----------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 条件と合致  | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 合致しない  | ー                 | ー                   | ×                      | ×            | ×            | ×                        |

## GET /api/index/

#### APIの使用

いずれかの○に合致すれば、インデックスを検索するAPIを使用することが出来ます。

| 条件/ロール                       | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| --------------------------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| インデックス<br>閲覧権限:<br>あり | ○                  | ○                    | ○                      | ○            | ○            | ○                        |
| インデックス<br>閲覧権限:<br>なし | ー                 | ー                   | ×                      | ×            | ×            | ×                        |

※ [インデックス閲覧権限](ITEM_SEARCH_01.md#インデックス閲覧権限)を参照ください。

## PUT /api/records/

#### APIの使用

いずれかの○に合致すれば、レコードの書き換えをするAPIを使用することが出来ます。

| 条件/ロール              | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| ------------------------ | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| アイテム作成者：<br>自分 | ○                  | ○                    | ○                      | ○            | ×            | ×                        |
| 代理投稿者：<br>自分     | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 上記以外                 | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

## アイテムAPIのアイテム閲覧権限

アイテムAPIにおけるアイテム閲覧権限の条件は以下の通りです。

以下、2つの条件の一方でも○なら閲覧可、どちらも×なら閲覧不可です。

#### 条件1 アイテム作成者、または代理投稿者

| 条件1 / ロール | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 自分           | ○                  | ○                    | ○                      | ○            | ○            | ×                        |
| 自分以外       | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

#### 条件2 インデックス閲覧権限有無 / アイテムの公開日 / アイテムのPublish Status

条件 2-1 インデックス閲覧権限：有 / 公開日：以降 / Publish Status：公開 の場合

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                  | ○                    | ○                      | ○            | ○            | ○                        |

条件 2-2　以下のいずれかに当てはまる場合<br>
① インデックス閲覧権限：有 / 公開日：以降 / Publish Status：非公開<br>
② インデックス閲覧権限：有 / 公開日：以前 / Publish Status：公開<br>
③ インデックス閲覧権限：有 / 公開日：以前 / Publish Status：非公開<br>
④ インデックス閲覧権限：無 / 公開日：以降 / Publish Status：公開<br>
⑤ インデックス閲覧権限：無 / 公開日：以降 / Publish Status：非公開<br>
⑥ インデックス閲覧権限：無 / 公開日：以前 / Publish Status：公開<br>
⑦ インデックス閲覧権限：無 / 公開日：以前 / Publish Status：非公開

| ロール   | システム<br>管理者 | リポジトリ<br>管理者 | コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>（未ログイン） |
| -------- | ------------------ | -------------------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 利用可否 | ○                  | ○                    | ×                      | ×            | ×            | ×                        |

※ [インデックス閲覧権限](ITEM_SEARCH_01.md#インデックス閲覧権限)を参照ください。

- > 更新履歴

<table>
<thead>
<tr class="header">
<th>日付</th>
<th>GitHubコミットID</th>
<th>更新内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>2025/8/8</p>
</blockquote></td>
<td></td>
<td>初版作成</td>
</tr>
</tbody>
</table>
