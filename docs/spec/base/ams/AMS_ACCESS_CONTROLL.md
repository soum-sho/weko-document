## 未病フロント アクセスコントロール

未病データベースにおけるアクセスコントロールについて記載する。

### 用語説明

本書では以下の用語で統一する。

| 用語       | 説明                                |
| ---------- | ----------------------------------- |
| 認証ユーザ | 目標 2 グループ所属のログインユーザ |

### 目次

- [TOP 画面](#TOP画面)
- [アイテム詳細画面](#アイテム詳細画面)
- [アイテム検索結果画面](#アイテム検索結果画面)
- [ファイル一覧画面](#ファイル一覧画面)
- [インデックス画面](#インデックス画面)

### TOP 画面

エンドポイント: `/`

#### アクセス権限

##### 認証ユーザ

| ロール                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー |
| ------------------------ | ------------------ | -------------------- | ------------------------- | ------------ | ------------ |
| アイテム最新情報取得可否 | ○                  | ○                    | 　 ○                      | ○            | ○            |
| アイテム検索可否         | ○                  | ○                    | 　 ○                      | ○            | ○            |
| インデックス階層取得可否 | ○                  | ○                    | 　 ○                      | ○            | ○            |

##### 認証ユーザ以外

| ロール                   | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ------------------------ | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| アイテム最新情報取得可否 | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| アイテム検索可否         | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| インデックス階層取得可否 | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |

※1: オープンアクセスのアイテムのみ操作可能です。

### アイテム詳細画面

エンドポイント: `/ams/detail?sess=search?number=<アイテムID>`

#### アクセス権限

##### 認証ユーザ

| ロール                                 | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー |
| -------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ |
| アイテム詳細取得可否                   | ○                  | ○                    | 　 ○                      | ○            | ○            |
| アイテム検索可否                       | ○                  | ○                    | 　 ○                      | ○            | ○            |
| インデクス階層取得可否                 | ○                  | ○                    | 　 ○                      | ○            | ○            |
| 添付ファイルダウンロード可否           | ○                  | ○                    | 　 ○                      | ○            | ○            |
| ダウンロードランキング取得可否（※1）   | ○                  | ○                    | 　 ○                      | ○            | ○            |
| プロジェクト URL へのアクセス可否 (※2) | ○                  | ○                    | 　 ○                      | ○            | ○            |
| リクエストメール送信可否 (※3)          | ○                  | ○                    | 　 ○                      | ○            | ○            |
| OAI-PMH エクスポート可否               | ○                  | ○                    | 　 ○                      | ○            | ○            |
| Other Formats エクスポート可否         | ○                  | ○                    | 　 ○                      | ○            | ○            |

##### 認証ユーザ以外

| ロール                                 | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| -------------------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| アイテム詳細取得可否                   | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| アイテム検索可否                       | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| インデクス階層取得可否                 | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| 添付ファイルダウンロード可否           | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| ダウンロードランキング取得可否（※1）   | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| プロジェクト URL へのアクセス可否 (※1) | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| リクエストメール送信可否 (※2)          | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| OAI-PMH エクスポート可否               | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |
| Other Formats エクスポート可否         | ○                  | ○                    | 　 △(※4)                  | △(※4)        | △(※4)        | △(※4)                  |

※1: アイテムにファイルが添付されている場合に取得出来ます。

※2: アイテムにプロジェクト URL が設定され、かつプロジェクト URL の関連タイプが isVersionOf の場合に GRDM ボタンが表示されます。

※3: アイテムにプロジェクト URL がなく、リクエストメールアドレスが設定されている場合にリクエストボタンが表示されます。

※4: オープンアクセスのアイテムのみ操作可能です。

### アイテム検索結果画面

エンドポイント: `/ams/search`

#### アクセス権限

##### 認証ユーザ

| ロール                       | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー |
| ---------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ |
| アイテム概要取得可否         | ○                  | ○                    | 　 ○                      | ○            | ○            |
| アイテム検索可否             | ○                  | ○                    | 　 ○                      | ○            | ○            |
| アイテム一括ダウンロード可否 | ○                  | ○                    | 　 ○                      | ○            | ○            |

##### 認証ユーザ以外

| ロール                       | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| アイテム概要取得可否         | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| アイテム検索可否             | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| アイテム一括ダウンロード可否 | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |

※1: オープンアクセスのアイテムのみ操作可能です。

### ファイル一覧画面

エンドポイント: `/ams/files?number=<アイテムID>`

#### アクセス権限

##### 認証ユーザ

| ロール                       | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー |
| ---------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ |
| ファイル詳細閲覧可否         | ○                  | ○                    | 　 ○                      | ○            | ○            |
| ファイル単一ダウンロード可否 | ○                  | ○                    | 　 ○                      | ○            | ○            |
| ファイル選択ダウンロード可否 | ○                  | ○                    | 　 ○                      | ○            | ○            |
| ファイル一括ダウンロード可否 | ○                  | ○                    | 　 ○                      | ○            | ○            |
| ファイルプレビュー可否       | ○                  | ○                    | 　 ○                      | ○            | ○            |

##### 認証ユーザ以外

| ロール                       | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| ファイル詳細閲覧可否         | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| ファイル単一ダウンロード可否 | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| ファイル選択ダウンロード可否 | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| ファイル一括ダウンロード可否 | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| ファイルプレビュー可否       | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |

※1: オープンアクセスのアイテムのみ操作可能です。

### インデックス画面

エンドポイント: `/ams/search/<インデックスID>`

#### アクセス権限

##### 認証ユーザ

| ロール                       | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー |
| ---------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ |
| アイテム概要取得可否         | ○                  | ○                    | 　 ○                      | ○            | ○            |
| アイテム検索可否             | ○                  | ○                    | 　 ○                      | ○            | ○            |
| 親インデックス階層取得可否   | ○                  | ○                    | 　 ○                      | ○            | ○            |
| アイテム一括ダウンロード可否 | ○                  | ○                    | 　 ○                      | ○            | ○            |

##### 認証ユーザ以外

| ロール                       | システム<br>管理者 | リポジトリ<br>管理者 | 　 コミュニティ<br>管理者 | 登録ユーザー | 一般ユーザー | ゲスト<br>(未ログイン) |
| ---------------------------- | ------------------ | -------------------- | ------------------------- | ------------ | ------------ | ---------------------- |
| アイテム概要取得可否         | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| アイテム検索可否             | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| 親インデックス階層取得可否   | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |
| アイテム一括ダウンロード可否 | ○                  | ○                    | 　 △(※1)                  | △(※1)        | △(※1)        | △(※1)                  |

※1: オープンアクセスのアイテムのみ操作可能です。

- > 更新履歴

<table>
<thead>
<tr class="header">
<th>日付</th>
<th>GitHubコミットID</th>
<th>更新内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>2025/07/14</p>
</blockquote></td>
<td></td>
<td>初版作成</td>
</tr>
</tr>
</tbody>
</table>
